// Lazy loading img & background images using intersection observer
// Reference: https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video/
// Using example: <img class="lazy" src="thumb.gif" data-src="real-img.jpg" data-srcset="real-img@1x.jpg 1x, real-img@2x.jpg 2x">
// Background image class usign example: <div class="lazy-background"> with added class ".visible" for styling
// Background image style attribute lazy loading example: <div data-bg="image.jpg">

// delete window.IntersectionObserver; // Fallback Testing

document.addEventListener('DOMContentLoaded', function() {

	var lazyImages = [].slice.call(document.querySelectorAll('img.lazy'));
	var lazyBackgrounds = [].slice.call(document.querySelectorAll('.lazy-background'));
	var lazyBackgroundsData = [].slice.call(document.querySelectorAll('[data-bg]'));

	if ('IntersectionObserver' in window) {

		let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
			entries.forEach(function(entry) {
				if (entry.isIntersecting) {
					let lazyImage = entry.target;
					lazyImage.src = lazyImage.dataset.src;
					lazyImage.srcset = lazyImage.dataset.srcset;
					lazyImage.classList.remove('lazy');
					lazyImageObserver.unobserve(lazyImage);
				}
			});
		});
		lazyImages.forEach(function(lazyImage) {
			lazyImageObserver.observe(lazyImage);
		});

	let lazyBackgroundObserver = new IntersectionObserver(function(entries, observer) {
		entries.forEach(function(entry) {
			if (entry.isIntersecting) {
				entry.target.classList.add('visible');
				lazyBackgroundObserver.unobserve(entry.target);
			}
		});
	});
	lazyBackgrounds.forEach(function(lazyBackground) {
		lazyBackgroundObserver.observe(lazyBackground);
	});

	let lazyBackgroundDataObserver = new IntersectionObserver(function(entries, observer) {
		entries.forEach(function(entry) {
			if (entry.isIntersecting) {
				let lazyBackgroundData = entry.target;
				lazyBackgroundData.style.backgroundImage = 'url(' + lazyBackgroundData.dataset.bg + ')';
				lazyBackgroundDataObserver.unobserve(lazyBackgroundData);
			}
		});
	});
	lazyBackgroundsData.forEach(function(lazyBackgroundData) {
		lazyBackgroundDataObserver.observe(lazyBackgroundData);
	});

	} else {

		// Fallback

		lazyImages.forEach(function(lazyImage) {
			lazyImage.src = lazyImage.dataset.src;
			lazyImage.srcset = lazyImage.dataset.srcset;
		});
		lazyBackgrounds.forEach(function(lazyBackground) {
			lazyBackground.classList.add('visible');
		});
		lazyBackgroundsData.forEach(function(lazyBackgroundData) {
			lazyBackgroundData.style.backgroundImage = 'url(' + lazyBackgroundData.dataset.bg + ')';
		});

	}

});


document.addEventListener("DOMContentLoaded", function() {



});

$(document).ready(function() {

    $('.country-call').click(function (e) {
        e.preventDefault();
        $('.country-modal').toggleClass('country-modal__active');
    })
    $(document).mouseup(function (e) {
        let el = $('.country-modal');
        if(el.is(e.target)
            && el.has(e.target).length === 0) {
            el.toggleClass('country-modal__active');
        }
    });
    $('.country-modal__close').click(function (e) {
        e.preventDefault();
        $('.country-modal').toggleClass('country-modal__active');
    })

    $(".btn-down").click(function () {
        var elementClick = $(this).attr("href");
        var destination = $(elementClick).offset().top;
        $('html').animate({ scrollTop: destination }, 1100);
        return false;
    });

    $('.search-header-btn').click(function (e) {
        e.preventDefault();
        // console.log('click');
        $('.search-form').toggleClass('active-form');
    });

    $('.villas-slider-main').owlCarousel({
        nav: false,
        dots: false,
        dotsData: false,
        dotsContainer: false,
        margin: 15,
        responsiveClass:true,
        responsiveBaseElement:"body",
        responsive:{
            0:{
                items:1.3,
                loop: true,
            },
            700:{
                items:2,
                loop: true,
            },
            1140:{
                items:3
            }
        }
    });

    var owlVi=$(".villas-slider-main");
    owlVi.owlCarousel();

    let villasSlides = document.querySelectorAll('.villas-slider-main .owl-item').length,
        villasCurrSlide = +$('.villas span.count-block__current').text(),
        villasCurrSlideText = '';

    $('.villas span.count-block__all').text(`/${villasSlides}`);

    //$(".next") - находим нашу кнопку
    $(".villas-arrow-right-btn").on("click", function(e){
        e.preventDefault();
        owlVi.trigger("prev.owl.carousel");
        villasCurrSlide = villasCurrSlide <= 3 ? villasCurrSlide : --villasCurrSlide;

        villasCurrSlideText = villasCurrSlide > 9 ? villasCurrSlide : `0${villasCurrSlide}`;

        $('.villas span.count-block__current').text(villasCurrSlideText);
        
    });
    $(".villas-arrow-left-btn").on("click", function(e){
        e.preventDefault();
        owlVi.trigger("next.owl.carousel");

        villasCurrSlide = villasCurrSlide >= villasSlides ? villasCurrSlide : ++villasCurrSlide;

        villasCurrSlideText = villasCurrSlide > 9 ? villasCurrSlide : `0${villasCurrSlide}`;

        $('.villas span.count-block__current').text(villasCurrSlideText);
    });


    $('.bottom-row-list').owlCarousel({
        loop:true,
        margin:10,
        nav:true,
        autoplay: true,
        responsiveBaseElement:"body",
        responsive:{
            0:{
                items:1
            },
            600:{
                items:3
            },
            1000:{
                items:6
            }
        }
    });


    $('.tours-slider-main').owlCarousel({
        nav: false,
        dots: false,
        dotsData: false,
        margin:15,
        dotsContainer: false,
        responsiveBaseElement:"body",
        responsive:{
            0:{
                items:1.3,
                loop: true,
            },
            700:{
                items:2,
                loop: true,
            },
            1140:{
                items:3
            }
        }
    });

    var owlTo=$(".tours-slider-main");
    owlTo.owlCarousel();

    let toursSlides = document.querySelectorAll('.tours-slider-main .owl-item').length,
        toursCurrSlide = +$('.tours span.count-block__current').text(),
        toursCurrSlideText = '';

    $('.tours span.count-block__all').text(`/${toursSlides}`);

    //$(".next") - находим нашу кнопку
    $(".arrow-right-btn-tours").on("click", function(e){
        e.preventDefault();
        owlTo.trigger("prev.owl.carousel");

        toursCurrSlide = toursCurrSlide <= 3 ? toursCurrSlide : --toursCurrSlide;

        toursCurrSlideText = toursCurrSlide > 9 ? toursCurrSlide : `0${toursCurrSlide}`;

        $('.tours span.count-block__current').text(toursCurrSlideText);

    });
    $(".arrow-left-btn-tours").on("click", function(e){
        e.preventDefault();
        owlTo.trigger("next.owl.carousel");

        toursCurrSlide = toursCurrSlide >= toursSlides ? toursCurrSlide : ++toursCurrSlide;

        toursCurrSlideText = toursCurrSlide > 9 ? toursCurrSlide : `0${toursCurrSlide}`;

        $('.tours span.count-block__current').text(toursCurrSlideText);
    });

    $('.clubs-slider-main').owlCarousel({
        nav: false,
        dots: false,
        dotsData: false,
        margin:15,
        dotsContainer: false,
        responsiveBaseElement:"body",
        responsive:{
            0:{
                items:1.3,
                loop: true,
            },
            700:{
                items:2,
                loop: true,
            },
            1140:{
                items:3
            }
        }
    });

    var owlCl=$(".clubs-slider-main");
    owlCl.owlCarousel();

    let clubsSlides = document.querySelectorAll('.clubs-slider-main .owl-item').length,
        clubsCurrSlide = +$('.clubs span.count-block__current').text(),
        clubsCurrSlideText = '';

    $('.clubs span.count-block__all').text(`/${clubsSlides}`);
    
    //$(".next") - находим нашу кнопку
    $(".arrow-right-btn-clubs").on("click", function(e){
        e.preventDefault();
        owlCl.trigger("prev.owl.carousel");

        clubsCurrSlide = clubsCurrSlide <= 3 ? clubsCurrSlide : --clubsCurrSlide;

        clubsCurrSlideText = clubsCurrSlide > 9 ? clubsCurrSlide : `0${clubsCurrSlide}`;

        $('.clubs span.count-block__current').text(clubsCurrSlideText);
    });
    $(".arrow-left-btn-clubs").on("click", function(e){
        e.preventDefault();
        owlCl.trigger("next.owl.carousel");

        clubsCurrSlide = clubsCurrSlide >= clubsSlides ? clubsCurrSlide : ++clubsCurrSlide;

        clubsCurrSlideText = clubsCurrSlide > 9 ? clubsCurrSlide : `0${clubsCurrSlide}`;

        $('.clubs span.count-block__current').text(clubsCurrSlideText);
    });

    $('.restaurants-slider-main').owlCarousel({
        nav: false,
        dots: false,
        dotsData: false,
        margin:15,
        dotsContainer: false,
        responsiveBaseElement:"body",
        responsive:{
            0:{
                items:1.3,
                loop: true,
            },
            700:{
                items:2,
                loop: true,
            },
            1140:{
                items:3
            }
        }
    });

    var owlRe=$(".restaurants-slider-main");
    owlRe.owlCarousel();

    let restaurantsSlides = document.querySelectorAll('.restaurants-slider-main .owl-item').length,
        restaurantsCurrSlide = +$('.restaurants span.count-block__current').text(),
        restaurantsCurrSlideText = '';

    $('.restaurants span.count-block__all').text(`/${restaurantsSlides}`);
    
    //$(".next") - находим нашу кнопку
    $(".arrow-right-btn-restaurants").on("click", function(e){
        e.preventDefault();
        owlRe.trigger("prev.owl.carousel");

        restaurantsCurrSlide = restaurantsCurrSlide <= 3 ? restaurantsCurrSlide : --restaurantsCurrSlide;

        restaurantsCurrSlideText = restaurantsCurrSlide > 9 ? restaurantsCurrSlide : `0${restaurantsCurrSlide}`;

        $('.restaurants span.count-block__current').text(restaurantsCurrSlideText);
    });
    $(".arrow-left-btn-restaurants").on("click", function(e){
        e.preventDefault();
        owlRe.trigger("next.owl.carousel");

        restaurantsCurrSlide = restaurantsCurrSlide >= restaurantsSlides ? restaurantsCurrSlide : ++restaurantsCurrSlide;

        restaurantsCurrSlideText = restaurantsCurrSlide > 9 ? restaurantsCurrSlide : `0${restaurantsCurrSlide}`;

        $('.restaurants span.count-block__current').text(restaurantsCurrSlideText);
    });


    $('.filtering').slick({
        slidesToShow: 4,
        slidesToScroll: 1,
        nextArrow: $(".car-arrow-right"),
        prevArrow: $(".car-arrow-left"),

        responsive: [
            {
                breakpoint: 2400,
                settings: {
                    slidesToShow: 6,
                    slidesToScroll: 1,
                }
            },
            {
                breakpoint: 2000,
                settings: {
                    slidesToShow: 4,
                    slidesToScroll: 1,
                }
            },
            {
                breakpoint: 1400,
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 1,
                }
            },
            {
                breakpoint: 850,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 1
                }
            },
            {
                breakpoint: 480,
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            },
        ]
    });

    $('.events-slider').owlCarousel({
        nav: false,
        dots: false,
        dotsData: false,
        dotsContainer: false,
        margin: 15,
        responsiveBaseElement:"body",
        responsive:{
            0:{
                items:1.3,
                loop: true,
            },
            700:{
                items:3,
                loop: true,
            },
            1140:{
                items:3
            }
        }
    });

    var owl=$(".events-slider");
    owl.owlCarousel();

    let eventsSlides = document.querySelectorAll('.events-slider .owl-item').length,
        eventsCurrSlide = +$('.events span.count-block__current').text(),
        eventsCurrSlideText = '';
    $('.events span.count-block__all').text(`/${eventsSlides}`);

    //$(".next") - находим нашу кнопку
    $(".arrow-right-btn").on("click", function(e){
        e.preventDefault();
        owl.trigger("next.owl.carousel");

        eventsCurrSlide = eventsCurrSlide >= eventsSlides ? eventsCurrSlide : ++eventsCurrSlide;

        eventsCurrSlideText = eventsCurrSlide > 9 ? eventsCurrSlide : `0${eventsCurrSlide}`;

        $('.events span.count-block__current').text(eventsCurrSlideText);
    });
    $(".arrow-left-btn").on("click", function(e){
        e.preventDefault();
        owl.trigger("prev.owl.carousel");

        eventsCurrSlide = eventsCurrSlide <= 3 ? eventsCurrSlide : --eventsCurrSlide;

        eventsCurrSlideText = eventsCurrSlide > 9 ? eventsCurrSlide : `0${eventsCurrSlide}`;

        $('.events span.count-block__current').text(eventsCurrSlideText);
    });

    $('.slider-events-club').owlCarousel({
        nav:true,
        dots: false,
        loop: true,
        margin: 17,
        navText : ["",""],
        responsive:{
            0:{
                items:1.2,
                nav: false,
                margin: 15,
            },
            600:{
                items:2,
                nav: false,
                margin: 15,
            },
            1200:{
                items: 4
            },
            1700:{
                items: 4
            }
        }
    });

    $('.slider-video').owlCarousel({
        nav: true,
        dots: false,
        loop: true,
        navText : ["",""],
        margin: 18,
        responsive:{
            0:{
                items:1.2,
                nav: false,
            },
            600:{
                items:1,
                nav: false,
            },
            1200:{
                items: 3
            },
            1700:{
                items: 4
            }
        }
    });

    $('.slider-event-foto').owlCarousel({
        nav: true,
        dots: false,
        // loop: true,
        navText : ["",""],
        margin: 18,
        responsive:{
            0:{
                items:1.3,
                nav: false,
            },
            600:{
                items:2,
                nav: false,
            },
            1200:{
                items: 3
            },
            1700:{
                items: 4
            }
        }
    });

    $('.restaurants-nearby-slider').owlCarousel({
        nav: false,
        dots: false,
        loop: true,
        navText : ["",""],
        margin: 18,
        responsiveBaseElement: 'body',
        responsive:{
            0:{
                items:1.3,
                nav: false,
            },
            600:{
                items:2,
                nav: false,
            },
            992:{
                items: 3
            },
            1140:{
                items: 4
            },
        }
    });

    $('.other-cars__slider').owlCarousel({
        loop: true,
        nav: true,
        dots:false,
        margin: 18,
        navText : ["",""],
        items: 4,
        responsiveBaseElement: 'body',
        responsive:{
            0:{
                items:1.3,
                nav: false,
            },
            600:{
                items:2,
                nav: false,
            },
            992:{
                items: 3
            },
            1140:{
                items: 4
            },
        }
    });

    $('.related-products-slider').owlCarousel({
        loop: true,
        nav: true,
        dots:false,
        margin: 18,
        navText : ["",""],
        items: 4,
        responsiveBaseElement: 'body',
        responsive:{
            0:{
                items:1.3,
                nav: false,
            },
            600:{
                items:2,
                nav: false,
            },
            992:{
                items: 3
            },
            1140:{
                items: 4
            },
        }
    });



    $('.drop-item > a, .drop-item-rotate').click(function() {
        $(this).parent().siblings().find('ul').slideUp(300);
        $(this).next('ul').stop(true, false, true).slideToggle(300);
        return false;
    });

    $('.btn-main-menu').click(function (e) {
        $('.right-full-menu').css({"right": "0"}).fadeIn(300);
        $('.shadow-screen').css({"right": "0"}).fadeIn(300);
        $("html, body").css("overflow","hidden");
        }
    );
    $('.cross-close').click(function (e) {
        e.preventDefault();
        $('.right-full-menu').fadeOut(300);
        $('.shadow-screen').fadeOut(300);
        $("html,body").css("overflow","auto");
    });
    $('.shadow-screen').click(function (e) {
        e.preventDefault();
        $(this).fadeOut(300);
        $("html,body").css("overflow","auto");
    });

    $('.villas-slider').fotorama({
        width: 774,
        maxwidth: 774,
        ratio: 16/9,
        allowfullscreen: true,
        nav: 'thumbs',
        fit: 'contain',
        // glimpse: 190,
        // navposition: 'top',
        // navwidth: 190,
        thumbwidth: 190,
        thumbheight: 106,
    });


    $('.villa-panorama').fotorama({
        width: 774,
        maxwidth: 774,
        ratio: 16/9,
        allowfullscreen: true,
        nav: 'thumbs',
        fit: 'contain',
        // glimpse: 190,
        // navposition: 'top',
        // navwidth: 190,
        thumbheight: 106,
        click: false,
        trackpad: false,
        swipe: false,
        arrows: false,
        startindex: 0,
        responsive : [
            {
                breakpoint:768,
                settings: {
                    swipe: false,
                }
            },
        ]


    });


//slider panorama
    $("#lightSlider").lightSlider({
        gallery:true,
        item:1,
        thumbItem:4,
        enableDrag: false,
        responsive : [
            {
                breakpoint:768,
                settings: {
                    swipe: false,
                }
            },
        ]

    });

    //Panorama slider
    $("a.club-panorama").on("click", function (e) {
        e.preventDefault();
        $(".panorama-slider").toggleClass('item__active');
    });

    $("a.close-panorama-slider").on("click", function (e) {
        e.preventDefault();
        $(".panorama-slider").toggleClass('item__active');
    });

    $("a.club-panorama2").on("click", function (e) {
        e.preventDefault();
        $(".panorama-slider2").toggleClass('item__active');
    });

    $("a.close-panorama-slider2").on("click", function (e) {
        e.preventDefault();
        $(".panorama-slider2").toggleClass('item__active');
    });

    // Menu slider
    $('.menu-foto-slider').fotorama({
        // width: 1140,
        maxwidth: 1140,
        height:'100%',
        ratio: 16/9,
        allowfullscreen: true,
        nav: 'thumbs',
        fit: 'contain',
        // glimpse: 190,
        // navposition: 'top',
        // navwidth: 190,
        thumbwidth: 190,
        thumbheight: 106,
    });

    $("a.open-menu").on("click", function (e) {
        e.preventDefault();
        $(".menu-slider").toggleClass('item__active');
    });

    $("a.close-menu-slider").on("click", function (e) {
        e.preventDefault();
        $(".menu-slider").toggleClass('item__active');
    });


    $(".slideup-parent").on("click", function(){
        $(this).toggleClass("active");
        $(this).next(".slideup-child").slideToggle().toggleClass("active");
    });

    $(".mobile-filter").on("click", function(){
        $("#search-villas").slideToggle();
    });

    $( function() {
        $( "#slider-range" ).slider({
            range: true,
            min: +$('#search-villas .search-price #amount').attr('value'),
            max: +$('#search-villas .search-price #amount2').attr('value'),
            values: [+$('#search-villas .search-price #amount').attr('value'), +$('#search-villas .search-price #amount2').attr('value')],
            slide: function( event, ui ) {
                $( "#search-villas .search-price #amount" ).val( ui.values[ 0 ]);
                $( "#search-villas .search-price #amount2" ).val(  ui.values[ 1 ] );
            }
        });
        // $( "#amount" ).val( $( "#slider-range" ).slider( "values", 0 ) + '');
        // $( "#amount2" ).val( $( "#slider-range" ).slider( "values", 1 ) );
    } );


//Filter
    $('#filter').submit(function(){
        var filter = $(this);
        $.ajax({
            url:'http://' + location.host + '/wp-admin/admin-ajax.php', // обработчик
            data:filter.serialize(), // данные
            type:filter.attr('method'), // тип запроса
            beforeSend:function(xhr){
                filter.find('button').text('Загружаю...'); // изменяем текст кнопки
            },
            success:function(data){
                filter.find('button').text('Применить фильтр'); // возвращаеи текст кнопки
                $('#response').html(data);
            }
        });
        return false;
    });

    $('.misha_loadmore').click(function(){

        var button = $(this),
            data = {
                'action': 'loadmore',
                'query': misha_loadmore_params.posts, // that's how we get params from wp_localize_script() function
                'page' : misha_loadmore_params.current_page
            };

        $.ajax({ // you can also use $.post here
            url : misha_loadmore_params.ajaxurl, // AJAX handler
            data : data,
            type : 'POST',
            beforeSend : function ( xhr ) {
                button.text('Loading...'); // change the button text, you can also add a preloader image
            },
            success : function( data ){
                if( data ) {
                    button.text( 'More posts' ).prev().before(data); // insert new posts
                    misha_loadmore_params.current_page++;

                    if ( misha_loadmore_params.current_page == misha_loadmore_params.max_page )
                        button.remove(); // if last page, remove the button

                    // you can also fire the "post-load" event here if you use a plugin that requires it
                    // $( document.body ).trigger( 'post-load' );
                } else {
                    button.remove(); // if no data, remove the button as well
                }
            }
        });
    });

    $('.call-contact-owner').click(function (e) {
        e.preventDefault();
        $('.modal-contact-owner').toggleClass('modal-contact-owner__active');
    });

    $('.close-contact-owner').click(function (e) {
        e.preventDefault();
        $('.modal-contact-owner').toggleClass('modal-contact-owner__active');
    })

    $('.modal-contact-owner').on('click', function(e){
        if(e.target.classList.contains('modal-contact-owner__active')){
            $('.modal-contact-owner').toggleClass('modal-contact-owner__active');
        }
    });

    // Contact form owner on the villa page
    $("#form-contact-owner").submit(function() {
        $.ajax({
            type: "POST",
            url: "/wp-content/themes/double/mail.php",
            data: $(this).serialize()
        }).done(function() {
            $(this).find("input").val("");
            $("#form-contact-owner").trigger("reset").html("Thanks");
            setTimeout(function () {
                $('.modal-contact-owner').toggleClass('modal-contact-owner__active');
            }, 2000);

        });
        return false;
    });



});

$(document).mouseup(function (e){ // событие клика по веб-документу
    var div = $(".right-full-menu"); // тут указываем ID элемента
    if (!div.is(e.target) // если клик был не по нашему блоку
        && div.has(e.target).length === 0) { // и не по его дочерним элементам
        div.hide(300); // скрываем его
    }
});

$(window).on('load',windowSize);
function windowSize(){
    if ($(window).width() <= '1200'){
        $('.spoiler-item a').click(function(e){
            e.preventDefault();
            $(this).next().slideToggle();
            $(this).toggleClass('arrow-spoiler-item arrow-spoiler-item-180deg');
        });

        $('.drop-item > a, .drop-item-rotate').click(function() {
            $(this).toggleClass('drop-item-rotate');
        });
    }
}

// $(window).on('resize',windowReSize);
// function windowReSize(){
//     if ($(window).width() <= '1200'){
//         $('.spoiler-item').click(function(e){
//             e.preventDefault();
//             $(this).next().slideToggle();
//             $(this).toggleClass('arrow-spoiler-item arrow-spoiler-item-180deg');
//         });
//     }
// }

// $( window ).resize(function() {
//     if ($(window).width() <= '1140'){
//         $('.spoiler-item').click(function(e){
//             e.preventDefault();
//             $(this).next().slideToggle();
//             $(this).toggleClass('arrow-spoiler-item arrow-spoiler-item-180deg');
//         });
//     }
// });


document.addEventListener("DOMContentLoaded", function() {

    // var galleryThumbs = new Swiper('.gallery-thumbs', {
    //     spaceBetween: 10,
    //     slidesPerView: 4,
    //     loop: true,
    //     freeMode: true,
    //     loopedSlides: 5, //looped slides should be the same
    //     watchSlidesVisibility: true,
    //     watchSlidesProgress: true,
    // });
    // var galleryTop = new Swiper('.gallery-top', {
    //     spaceBetween: 10,
    //     loop:true,
    //     loopedSlides: 5, //looped slides should be the same
    //     navigation: {
    //         nextEl: '.swiper-button-next',
    //         prevEl: '.swiper-button-prev',
    //     },
    //     thumbs: {
    //         swiper: galleryThumbs,
    //     },
    // });

    // Params
    let mainSliderSelector = '.main-slider',
        navSliderSelector = '.nav-slider',
        interleaveOffset = 0.5;

// Main Slider
    let mainSliderOptions = {
        loop: true,
        speed:1000,
        autoplay:{
            delay:3000
        },
        loopAdditionalSlides: 10,
        grabCursor: true,
        watchSlidesProgress: true,
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        on: {
            init: function(){
                this.autoplay.stop();
            },
            imagesReady: function(){
                this.el.classList.remove('loading');
                this.autoplay.start();
            },
            slideChangeTransitionEnd: function(){
                let swiper = this,
                    captions = swiper.el.querySelectorAll('.caption');
                for (let i = 0; i < captions.length; ++i) {
                    captions[i].classList.remove('show');
                }
                swiper.slides[swiper.activeIndex].querySelector('.caption').classList.add('show');
            },
            progress: function(){
                let swiper = this;
                for (let i = 0; i < swiper.slides.length; i++) {
                    let slideProgress = swiper.slides[i].progress,
                        innerOffset = swiper.width * interleaveOffset,
                        innerTranslate = slideProgress * innerOffset;

                    swiper.slides[i].querySelector(".slide-bgimg").style.transform =
                        "translateX(" + innerTranslate + "px)";
                }
            },
            touchStart: function() {
                let swiper = this;
                for (let i = 0; i < swiper.slides.length; i++) {
                    swiper.slides[i].style.transition = "";
                }
            },
            setTransition: function(speed) {
                let swiper = this;
                for (let i = 0; i < swiper.slides.length; i++) {
                    swiper.slides[i].style.transition = speed + "ms";
                    swiper.slides[i].querySelector(".slide-bgimg").style.transition =
                        speed + "ms";
                }
            }
        }
    };
    let mainSlider = new Swiper(mainSliderSelector, mainSliderOptions);

// Navigation Slider
    let navSliderOptions = {
        loop: true,
        loopAdditionalSlides: 10,
        speed:1000,
        spaceBetween: 5,
        slidesPerView: 5,
        centeredSlides : true,
        touchRatio: 0.2,
        slideToClickedSlide: true,
        direction: 'vertical',
        on: {
            imagesReady: function(){
                this.el.classList.remove('loading');
            },
            click: function(){
                mainSlider.autoplay.stop();
            }
        }
    };
    let navSlider = new Swiper(navSliderSelector, navSliderOptions);

//Matching sliders

    if(mainSlider.controller){
        mainSlider.controller.control = navSlider;
    }
    if(navSlider.controller){
        navSlider.controller.control = mainSlider;
    }


    //count products
    $('.quantity-gf__inc-button').click(function(){
        let count = +$(this).siblings('.quantity-gf__count').text(),
            step = +$(this).parent('.quantity-gf').siblings('.input-text.qty.text').attr('step'),
            max = +$(this).parent('.quantity-gf').siblings('.input-text.qty.text').attr('max');

        if(max){
            if(count + step > max){
                return
            }
        }
        

        $(this).siblings('.quantity-gf__count').text(count + step);
        $(this).parent('.quantity-gf').siblings('.input-text.qty.text').attr('value', count + step);
    });

    $('.quantity-gf__dec-button').click(function(){
        let count = +$(this).siblings('.quantity-gf__count').text(),
            step = +$(this).parent('.quantity-gf').siblings('.input-text.qty.text').attr('step');

        if(count <= 1){
            return
        }

        $(this).siblings('.quantity-gf__count').text(count - step);
        $(this).parent('.quantity-gf').siblings('.input-text.qty.text').attr('value', count - step);
    });

    //count persons on tour page

    $('.tour-top-page__info-count-inc').click(function(){
        let count = +$('.tour-top-page__info-count-val').attr('value');
        $('.tour-top-page__info-count-val').attr('value', ++count);
    });

    $('.tour-top-page__info-count-dec').click(function(){
        let count = +$('.tour-top-page__info-count-val').attr('value');
        count = count > 1 ? --count : count;
        $('.tour-top-page__info-count-val').attr('value', count);
    });

    $( function() {
        $( "#slider-range-rent-transport" ).slider({
            range: true,
            min: +$('.search-price__transport.search-price #amount').attr('value'),
            max: +$('.search-price__transport.search-price #amount2').attr('value'),
            values: [+$('.search-price__transport.search-price #amount').attr('value'), +$('.search-price__transport.search-price #amount2').attr('value')],
            slide: function( event, ui ) {
                $( ".search-price__transport.search-price #amount" ).val( ui.values[ 0 ]);
                $( ".search-price__transport.search-price #amount2" ).val(  ui.values[ 1 ] );
            }
        });
        // $( "#amount" ).val( $( "#slider-range" ).slider( "values", 0 ) + '');
        // $( "#amount2" ).val( $( "#slider-range" ).slider( "values", 1 ) );
    } );

});